/*
 * main.c
 *
 *  Created on: 6 но€б. 2017 г.
 *      Author: Laptop
 */

#include <xil_io.h>

#define TIMER_ADDRESS 0x41C00000
#define GPIO_ADDRESS  0x40000000

int main()
{
	// AXI Timer configuration
	// timer 1
	Xil_Out32(TIMER_ADDRESS, 0x99);
	// timer 2
	Xil_Out32(TIMER_ADDRESS + 0x10, 0x99);

	while(1)
	{
		// timer 1 load register
		u32 t1 = Xil_In32(TIMER_ADDRESS + 0x04);
		// timer 1 control register
		u32 c1 = Xil_In32(TIMER_ADDRESS);

		// capture is occurred
		if (c1 & 0x100)
			Xil_Out32(GPIO_ADDRESS, t1);

		// timer 2 load data
		//u32 t2 = Xil_In32(TIMER_ADDRESS + 0x14);
		//Xil_Out32(GPIO_ADDRESS, t2 - t1);
	}
}


